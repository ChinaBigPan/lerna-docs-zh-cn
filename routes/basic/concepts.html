<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>概念 | Lerna</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/lerna-docs-zh-cn/images/lerna_favicon.ico">
    <meta name="description" content="用于管理带有多个包的 JavaScript 项目的工具。">
    <link rel="preload" href="/lerna-docs-zh-cn/assets/css/0.styles.6207e96a.css" as="style"><link rel="preload" href="/lerna-docs-zh-cn/assets/js/app.49e1ae94.js" as="script"><link rel="preload" href="/lerna-docs-zh-cn/assets/js/2.c7b6054d.js" as="script"><link rel="preload" href="/lerna-docs-zh-cn/assets/js/9.70d8ce96.js" as="script"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/10.b75cc033.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/11.779ba1c2.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/12.00a61c83.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/13.7471e1ef.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/14.d4e8f0b4.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/15.8ce0b658.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/16.54beaf8c.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/17.9563e499.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/18.b02194ea.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/19.9bf827cd.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/20.d00780e6.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/21.0aca7fe9.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/22.7b433ac2.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/23.0304035d.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/24.1b83ab75.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/25.a92ecad3.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/26.cf0eee03.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/27.373f414c.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/28.356c1ef7.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/29.b6e9c1cc.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/3.46363123.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/30.9dfe906b.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/31.d82404dc.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/4.7351e2e0.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/5.392966c7.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/6.3569bd4e.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/7.01317e14.js"><link rel="prefetch" href="/lerna-docs-zh-cn/assets/js/8.e54138c8.js">
    <link rel="stylesheet" href="/lerna-docs-zh-cn/assets/css/0.styles.6207e96a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lerna-docs-zh-cn/" class="home-link router-link-active"><img src="/lerna-docs-zh-cn/images/logo.png" alt="Lerna" class="logo"> <span class="site-name can-hide">Lerna</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.febeacon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大笑文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/lerna-docs-zh-cn/" class="nav-link">
  文档首页
</a></div><div class="nav-item"><a href="/lerna-docs-zh-cn/routes/commands/" class="nav-link">
  Lerna 指令
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.febeacon.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大笑文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/lerna-docs-zh-cn/" class="nav-link">
  文档首页
</a></div><div class="nav-item"><a href="/lerna-docs-zh-cn/routes/commands/" class="nav-link">
  Lerna 指令
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lerna-docs-zh-cn/routes/basic/about.html" class="sidebar-link">关于</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/start.html" class="sidebar-link">开始</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/how_it_works.html" class="sidebar-link">如何工作的？</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/troubleshooting.html" class="sidebar-link">排忧解难</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/FAQ.html" class="sidebar-link">常见问题</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/concepts.html" class="active sidebar-link">概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lerna-docs-zh-cn/routes/basic/concepts.html#lerna-json" class="sidebar-link">lerna.json</a></li><li class="sidebar-sub-header"><a href="/lerna-docs-zh-cn/routes/basic/concepts.html#git-托管的依赖" class="sidebar-link">Git 托管的依赖</a></li><li class="sidebar-sub-header"><a href="/lerna-docs-zh-cn/routes/basic/concepts.html#readme-标签" class="sidebar-link">README 标签</a></li><li class="sidebar-sub-header"><a href="/lerna-docs-zh-cn/routes/basic/concepts.html#向导" class="sidebar-link">向导</a></li></ul></li><li><a href="/lerna-docs-zh-cn/routes/basic/global_options.html" class="sidebar-link">全局配置项</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/filter_options.html" class="sidebar-link">过滤器配置项</a></li><li><a href="/lerna-docs-zh-cn/routes/basic/hoisting.html" class="sidebar-link">Lerna Hoisting</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="概念">概念</h1> <p>当运行命令遇到错误时，Lerna 会将其记录到<code>lerna-debug.log</code>文件（与<code>npm-debug.log</code>）一样。</p> <p>Lerna 同样也支持<a href="https://docs.npmjs.com/misc/scope" target="_blank" rel="noopener noreferrer">scoped packages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>运行<code>lerna --help</code>查看所有可用的命令和配置项。</p> <h2 id="lerna-json">lerna.json</h2> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;npmClient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;publish&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;ignoreChanges&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ignored-file&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.md&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chore(release): publish&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;registry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://npm.pkg.github.com&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bootstrap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;component-*&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;npmClientArgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--no-package-lock&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;packages/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>说明：</strong></p> <table><thead><tr><th style="text-align:center;">属性名</th> <th>描述</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>version</code></td> <td>当前版本</td></tr> <tr><td style="text-align:center;"><code>npmClient</code></td> <td>指定运行命令的客户端(也可以根据每个命令单独指定)。设定为<code>&quot;yarn&quot;</code>则使用<code>yarn</code>运行。默认值是<code>&quot;npm&quot;</code></td></tr> <tr><td style="text-align:center;"><code>command.publish.ignoreChanges</code></td> <td>通配符的数组，其中的值不会被 lerna 监测更改和发布。使用它可以防止因更改发布不必要的新版本，比如仅仅是修复 README.md 的错误。</td></tr> <tr><td style="text-align:center;"><code>command.publish.message</code></td> <td>执行发布版本更新时的自定义提交消息。更多细节见<a href="https://github.com/lerna/lerna/blob/master/commands/version#--message-msg" target="_blank" rel="noopener noreferrer">@lerna/version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:center;"><code>command.publish.registry</code></td> <td>使用它来设置要发布的自定义注册 url，而非 npmjs.org，如果需要的话，您必须经过授权。</td></tr> <tr><td style="text-align:center;"><code>command.bootstrap.ignore</code></td> <td>运行<code>lerna bootstrap</code>指令时会忽视该字符串数组中的通配符匹配的文件。</td></tr> <tr><td style="text-align:center;"><code>command.bootstrap.npmClientArgs</code></td> <td>该字符串数组中的参数将在<code>lerna bootstrap</code>命令期间直接传递给<code>npm install</code>。</td></tr> <tr><td style="text-align:center;"><code>command.bootstrap.scope</code></td> <td>该通配符的数组会在<code>lerna bootstrap</code>命令运行时限制影响的范围。</td></tr> <tr><td style="text-align:center;"><code>packages</code></td> <td>表示包位置的全局变量数组。</td></tr></tbody></table> <p><code>lerna.json</code>中的<code>packages</code>配置是一个通配符列表，用于匹配包含了<code>package.json</code>的的目录。这就是 lerna 识别“叶子”包(和“根”<code>package.json</code>相对应，用于管理整个仓库的开发依赖和脚本)。</p> <p>默认情况下，lerna 将包的列表初始化为<code>[&quot;packages/*&quot;]</code>，但是您也可以使用另一个目录，比如<code>[&quot;modules/*&quot;]</code>或<code>[&quot;package1&quot;, &quot;package2&quot;]</code>。定义的通配符是相对于<code>lerna.json</code>所在的目录的，该目录通常是存储库的更目录。唯一的限制是不能直接嵌套包的未知，但是该限制在“普通” npm 包中也是存在的。</p> <p>举个栗子🌰，<code>[&quot;packages/*&quot;, &quot;src/**&quot;]</code>匹配的是下面这样的树形结构：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>packages/
├── foo-pkg
│   └── package.json
├── bar-pkg
│   └── package.json
├── baz-pkg
│   └── package.json
└── qux-pkg
    └── package.json
src/
├── admin
│   ├── my-app
│   │   └── package.json
│   ├── stuff
│   │   └── package.json
│   └── things
│       └── package.json
├── profile
│   └── more-things
│       └── package.json
├── property
│   ├── more-stuff
│   │   └── package.json
│   └── other-things
│       └── package.json
└── upload
    └── other-stuff
        └── package.json

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>定位<code>packages/*</code>下的叶子包被认为是“最佳实践”，但不是使用 Lerna 的必要条件。</p> <p><strong>一些已经废弃的字段</strong></p> <p>一些<code>lerna.json</code>字段已不再使用。值得注意的包括:</p> <ul><li><code>lerna</code>: 原本用于指示当前 Lerna 的版本。在 v3 中被<a href="https://github.com/lerna/lerna/pull/1122" target="_blank" rel="noopener noreferrer">废弃<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://github.com/lerna/lerna/pull/1225" target="_blank" rel="noopener noreferrer">删除<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="常见的devdependencies">常见的<code>devDependencies</code></h3> <p>通过<code>Lerna link convert</code>，大多数<code>devdependency</code>可以被拉到 Lerna 库的根目录。</p> <p>上面的命令将自动提升(hoist)文件并使用相对的<code>files</code>文件说明符。</p> <p>提升有如下好处:</p> <ul><li>所有的包使用的依赖版本均相同。</li> <li>可以使用<a href="https://greenkeeper.io/" target="_blank" rel="noopener noreferrer">GreenKeeper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>之类的自动化工具更新根目录中的依赖。</li> <li>降低了依赖安装时间。</li> <li>所需的存储空间更少了。</li></ul> <p>注意，提供 npm 脚本使用的“二进制”可执行文件的<code>devdependency</code>仍然需要直接安装在使用它们的每个包中。</p> <p>例如，对于正确运行<code>lerna run nsp</code>(以及在包的目录中运行<code>npm run nsp</code>)来说，<code>nsp</code>依赖关系是必须的:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nsp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nsp&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nsp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.3.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="git-托管的依赖">Git 托管的依赖</h2> <p>Lerna 允许本地依赖包的目标版本通过<code>committish</code>编写为<a href="https://docs.npmjs.com/cli/install" target="_blank" rel="noopener noreferrer">git 远程 url<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>(例如<code>#v1.0.0</code>或<code>#semver:^1.0.0</code>)。而非正常数值范围版本。当包必须为私有且无需<a href="https://www.dotconferences.com/2016/05/fabien-potencier-monolithic-repositories-vs-many-repositories" target="_blank" rel="noopener noreferrer">私有的 npm 注册表<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>时，允许通过 git 仓库发包。</p> <p>请注意，lerna 并没有实际地将 git 历史记录分割到单独的只读存储库当中。这是用户的事情。(点击<a href="https://github.com/lerna/lerna/pull/1033#issuecomment-335894690" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>了解实现细节)。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// packages/pkg-1/package.json</span>
<span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;pkg-1&quot;</span><span class="token punctuation">,</span>
  version<span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  dependencies<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;pkg-2&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;github:example-user/pkg-2#v1.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// packages/pkg-2/package.json</span>
<span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;pkg-2&quot;</span><span class="token punctuation">,</span>
  version<span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在上面的示例中：</p> <ul><li><code>lerna bootstrap</code>会将<code>pkg-2</code>与<code>pkg-1</code>恰当的连接起来。</li> <li><code>lerna publish</code>当<code>pkg-2</code>发生变化时，它将更新<code>pkg-1</code>中的 committish (<code>#v1.0.0</code>)。</li></ul> <h2 id="readme-标签">README 标签</h2> <p>用 Lerna 不整一个标签么？<a href="https://lerna.js.org/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/maintained%20with-lerna-cc00ff.svg" alt="lerna"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-md line-numbers-mode"><pre class="language-md"><code><span class="token url">[<span class="token content">![lerna</span>](https://img.shields.io/badge/maintained%20with-lerna-cc00ff.svg)</span>](https://lerna.js.org/)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="向导">向导</h2> <p>如果您喜欢一些关于 cli 的指导信息(如果您即将开始使用 lerna 或将其介绍给一个新的团队)，那么您可能会喜欢<a href="https://github.com/szarouski/lerna-wizard" target="_blank" rel="noopener noreferrer">lerna-wizard<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。它通过一些定义好的步骤来帮助您：</p> <p><img src="/lerna-docs-zh-cn/images/lerna-wizard.png" alt="image"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lerna-docs-zh-cn/routes/basic/FAQ.html" class="prev">
        常见问题
      </a></span> <span class="next"><a href="/lerna-docs-zh-cn/routes/basic/global_options.html">
        全局配置项
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lerna-docs-zh-cn/assets/js/app.49e1ae94.js" defer></script><script src="/lerna-docs-zh-cn/assets/js/2.c7b6054d.js" defer></script><script src="/lerna-docs-zh-cn/assets/js/9.70d8ce96.js" defer></script>
  </body>
</html>
