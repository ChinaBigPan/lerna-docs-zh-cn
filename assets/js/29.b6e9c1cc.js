(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{376:function(e,s,a){"use strict";a.r(s);var t=a(43),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"lerna-publish"}},[a("code",[e._v("@lerna/publish")])]),e._v(" "),a("blockquote",[a("p",[e._v("在当前项目中发布包")])]),e._v(" "),a("h2",{attrs:{id:"使用"}},[e._v("使用")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("lerna publish              "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 发布自上一个版本以来发生了变化的包")]),e._v("\nlerna publish from-git     "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 发布当前提交中标记的包")]),e._v("\nlerna publish from-package "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 发布注册表中没有最新版本的包")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("在运行时，该命令做了下面几件事中的一个：")]),e._v(" "),a("ul",[a("li",[e._v("发布自上一个版本以来更新的包(背后调用了"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/version#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("lerna version"),a("OutboundLink")],1),e._v(")。\n"),a("ul",[a("li",[e._v("这是 lerna 2.x 版本遗留下来的。")])])]),e._v(" "),a("li",[e._v("发布在当前提交中标记的包("),a("code",[e._v("from-git")]),e._v(")。")]),e._v(" "),a("li",[e._v("发布在最新提交时注册表中没有版本的包("),a("code",[e._v("from-package")]),e._v(")。")]),e._v(" "),a("li",[e._v("发布在前一次提交中更新的包(及其依赖项)的“金丝雀(canary)”版。")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("Lerna 永远不会发布标记为"),a("code",[e._v("private")]),e._v("的包（"),a("code",[e._v("package.json")]),e._v("中的"),a("code",[e._v("”private“: true")]),e._v("）")])]),e._v(" "),a("p",[e._v("在所有的发布过程中，都有"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("生命周期"),a("OutboundLink")],1),e._v("在根目录和每个包中运行(除非使用了"),a("code",[e._v("--ignore-scripts")]),e._v(")。")]),e._v(" "),a("p",[e._v("请查看"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#per-package-configuration",target:"_blank",rel:"noopener noreferrer"}},[e._v("每个包的配置"),a("OutboundLink")],1),e._v("以了解发布作用域限定的包、自定义注册表和自定义标记的详细信息。")]),e._v(" "),a("h2",{attrs:{id:"位置"}},[e._v("位置")]),e._v(" "),a("h3",{attrs:{id:"from-git"}},[a("code",[e._v("from-git")])]),e._v(" "),a("p",[e._v("除了 "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/version#positionals",target:"_blank",rel:"noopener noreferrer"}},[e._v("lerna version"),a("OutboundLink")],1),e._v(" 支持的语义化版本关键字外，"),a("code",[e._v("lerna publish")]),e._v("也支持"),a("code",[e._v("from-git")]),e._v("关键字。这将会识别"),a("code",[e._v("lerna version")]),e._v("标记的包，并将它们发布到 npm。这在您希望手动增加版本的 CI 场景中非常有用，但要通过自动化过程一直地发布包内容本身。")]),e._v(" "),a("h3",{attrs:{id:"from-package"}},[a("code",[e._v("from-package")])]),e._v(" "),a("p",[e._v("与"),a("code",[e._v("from-git")]),e._v("关键字类似，只是要发布的包列表是通过检查每个"),a("code",[e._v("package.json")]),e._v("确定的，并且要确定注册表中是否存在任意版本的包。注册表中没有的任何版本都将被发布。当前一个"),a("code",[e._v("lerna publish")]),e._v("未能将所有包发布到注册表时，就是他发挥的时候了。")]),e._v(" "),a("h2",{attrs:{id:"配置项"}},[e._v("配置项")]),e._v(" "),a("p",[a("code",[e._v("lerna publish")]),e._v("支持"),a("code",[e._v("lerna version")]),e._v("提供的所有配置项，除了以下这些：")]),e._v(" "),a("h3",{attrs:{id:"canary"}},[a("code",[e._v("--canary")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --canary\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1.0.0 => 1.0.1-alpha.0+${SHA} of packages changed since the previous commit")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# a subsequent canary publish will yield 1.0.1-alpha.1+${SHA}, etc")]),e._v("\n\nlerna publish --canary --preid beta\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1.0.0 => 1.0.1-beta.0+${SHA}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The following are equivalent:")]),e._v("\nlerna publish --canary minor\nlerna publish --canary preminor\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1.0.0 => 1.1.0-alpha.0+${SHA}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("p",[e._v("当使用该标志运行时，"),a("code",[e._v("lerna publish")]),e._v("以更粒度的方式(每次提交)来发布包。在发布到 npm 之前，它会通过当前的"),a("code",[e._v("version")]),e._v("创建新的"),a("code",[e._v("version")]),e._v("标记，升级到下一个小版本(minor)，添加传入的 meta 后缀(默认为"),a("code",[e._v("alpha")]),e._v(")并且附加当前的 git sha 码（例如："),a("code",[e._v("1.0.0")]),e._v("变成"),a("code",[e._v("1.1.0-alpha.0+81e3b443")]),e._v("）。")]),e._v(" "),a("p",[e._v("如果您已经从 CI 中的多个活动开发分支发布了 canary 版本，那么建议在每个分支的基础上定制"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--preid",target:"_blank",rel:"noopener noreferrer"}},[e._v("--preid"),a("OutboundLink")],1),e._v("和"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("--dist-tag <tag>"),a("OutboundLink")],1),e._v("以避免版本冲突。")]),e._v(" "),a("blockquote",[a("p",[e._v("该参数是需要发布每次提交版或每日构建版时使用。")])]),e._v(" "),a("h3",{attrs:{id:"contents-dir"}},[a("code",[e._v("--contents <dir>")])]),e._v(" "),a("p",[e._v("要发布的子目录。必定应用于所有包，且必须包含 package.json 文件。包的生命周期仍然在原来的叶子目录中运行。您应当使用其中的一个生命周期("),a("code",[e._v("prepare")]),e._v("、"),a("code",[e._v("prepublishOnly")]),e._v("或"),a("code",[e._v("prepack")]),e._v(")来创建子目录等等。")]),e._v(" "),a("p",[e._v("如果您不喜欢非必要的复杂发布，这将给您带来乐趣。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --contents dist\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 发布每个由 Lerna 管理的叶子包的 dist 文件夹")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("您应该等到"),a("code",[e._v("postpublish")]),e._v("生命周期阶段(根目录或叶目录)才清理这个生成的子目录，因为生成的 package.json 是在包上传期间(在"),a("code",[e._v("postpack")]),e._v("之后)使用的。")])]),e._v(" "),a("h3",{attrs:{id:"dist-tag-tag"}},[a("code",[e._v("--dist-tag <tag>")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --dist-tag next\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("当带有该参数时，"),a("code",[e._v("lerna publish")]),e._v("将使用给定的 npm "),a("a",{attrs:{href:"https://docs.npmjs.com/cli/dist-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("dist-tag"),a("OutboundLink")],1),e._v("(默认为"),a("code",[e._v("latest")]),e._v(") 发布到 npm。")]),e._v(" "),a("p",[e._v("该配置项可用于在非"),a("code",[e._v("latest")]),e._v("的 dist-tag 下发布"),a("a",{attrs:{href:"http://carrot.is/coding/npm_prerelease",target:"_blank",rel:"noopener noreferrer"}},[e._v("预发布"),a("OutboundLink")],1),e._v("或"),a("code",[e._v("beta")]),e._v("版本，帮助用户免于自动升级到预发布质量的代码。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[a("code",[e._v("latest")]),e._v("标记是用户运行"),a("code",[e._v("npm install my-package")]),e._v("时使用的标记。要安装不同的标记，用户可以运行"),a("code",[e._v("npm install my-package@prerelease")]),e._v("。")])]),e._v(" "),a("h3",{attrs:{id:"git-head-sha"}},[a("code",[e._v("--git-head <sha>")])]),e._v(" "),a("p",[e._v("在打包压缩时，显式地在 manifest 上设置为 gitHead，该操作只允许通过"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#bump-from-package",target:"_blank",rel:"noopener noreferrer"}},[e._v("from-package"),a("OutboundLink")],1),e._v("位置进行。")]),e._v(" "),a("p",[e._v("举个例子，当我们从 AWS CodeBuild (这里"),a("code",[e._v("git")]),e._v("用不了)发布时，您可以使用该配置项传递适当的"),a("a",{attrs:{href:"https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-env-vars.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("环境变量"),a("OutboundLink")],1),e._v("来作为该包的元数据。")]),e._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[e._v("lerna publish "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("package")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("--")]),e._v("git"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("head $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("CODEBUILD_RESOLVED_SOURCE_VERSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("在所有其他情况下，该值是从本地的"),a("code",[e._v("git")]),e._v("命令派生而成的。")]),e._v(" "),a("h3",{attrs:{id:"graph-type-all-dependencies"}},[a("code",[e._v("--graph-type <all|dependencies>")])]),e._v(" "),a("p",[e._v("设置在构建包依赖图时使用哪种依赖关系。默认值是"),a("code",[e._v("dependencies")]),e._v("，因此只包括包的"),a("code",[e._v("package.json")]),e._v("的"),a("code",[e._v("dependencies")]),e._v("部分中列出的包。若设置为"),a("code",[e._v("all")]),e._v("，则在构建包依赖图和决定拓扑顺序时会包括"),a("code",[e._v("dependencies")]),e._v("和"),a("code",[e._v("devDependencies")]),e._v("。")]),e._v(" "),a("p",[e._v("在使用传统的 peer + dev 依赖对时，应该将此项配置为"),a("code",[e._v("all")]),e._v("，以便 peer 可以总在其依赖项之前发布。")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("lerna publish --graph-type all\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("通过"),a("code",[e._v("lerna.json")]),e._v("来配置:")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"publish"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"graphType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"all"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h3",{attrs:{id:"ignore-scripts"}},[a("code",[e._v("--ignore-scripts")])]),e._v(" "),a("p",[e._v("这个参数会让"),a("code",[e._v("lerna publish")]),e._v("在发布期间禁用运行的"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("生命周期脚本"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"ignore-prepublish"}},[a("code",[e._v("--ignore-prepublish")])]),e._v(" "),a("p",[e._v("这个参数会让"),a("code",[e._v("lerna publish")]),e._v("在发布期间禁用"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/scripts#prepublish-and-prepare",target:"_blank",rel:"noopener noreferrer"}},[e._v("已废弃"),a("OutboundLink")],1),e._v("的"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("prepublish")]),e._v("脚本"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h3",{attrs:{id:"legacy-auth"}},[a("code",[e._v("--legacy-auth")])]),e._v(" "),a("p",[e._v("当您发布需要身份验证但使用内部托管的 NPM 注册表时，该注册表只使用旧 Base64 版本的 username:password。这与 NPM publish 的 "),a("code",[e._v("_auth")]),e._v("标志相同。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --legacy-auth aGk6bW9t\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"no-git-reset"}},[a("code",[e._v("--no-git-reset")])]),e._v(" "),a("p",[e._v("默认情况下，"),a("code",[e._v("lerna publish")]),e._v("确保任何对工作树的更改都会被重置。")]),e._v(" "),a("p",[e._v("为了避免这种情况，可以设置"),a("code",[e._v("——no-git-reset")]),e._v("。当作为 CI 流程的一部分与"),a("code",[e._v("——canary")]),e._v("一起使用时，这一点特别有用。例如，已经被替换的"),a("code",[e._v("package.json")]),e._v("版本号可能需要在随后的"),a("code",[e._v("CI")]),e._v("流程步骤中使用(比如 Docker 构建)。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --no-git-reset\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"no-granular-pathspec"}},[a("code",[e._v("--no-granular-pathspec")])]),e._v(" "),a("p",[e._v("默认情况下，"),a("code",[e._v("lerna publish")]),e._v("将尝试(如果启用)只"),a("code",[e._v("git checkout")]),e._v("在发布过程中临时修改的叶子包清单。这相当于"),a("code",[e._v("git checkout -- packages/*/package.json")]),e._v("，但是"),a("em",[e._v("精确地")]),e._v("定制了变化。")]),e._v(" "),a("p",[e._v("如果您确实知道您需要不同的行为，那么您就会理解：通过"),a("code",[e._v("--no-granular-pathspec")]),e._v("会让 git 命令执行的"),a("code",[e._v("git checkout -- .")]),e._v("。通过选择这个"),a("a",{attrs:{href:"https://git-scm.com/docs/gitglossary#Documentation/gitglossary.txt-aiddefpathspecapathspec",target:"_blank",rel:"noopener noreferrer"}},[e._v("路径规范"),a("OutboundLink")],1),e._v("，您必须有意忽略所有未版本化的内容。")]),e._v(" "),a("p",[e._v("该项最好在"),a("code",[e._v("lerna.json")]),e._v("中配置，否则会原地去世的：")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"independent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"granularPathspec"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("根级配置是有意为之，因为它还包括了"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/version#--no-granular-pathspec",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("lerna version")]),e._v("中的同名配置项"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h3",{attrs:{id:"no-verify-access"}},[a("code",[e._v("--no-verify-access")])]),e._v(" "),a("p",[e._v("默认情况下，"),a("code",[e._v("lerna")]),e._v("将严重登录的 npm 用户对即将发布的包的访问权限。设置该参数将禁用该验证。")]),e._v(" "),a("p",[e._v("如果您使用的是不支持"),a("code",[e._v("npm access ls-packages")]),e._v("的第三方注册表，则需要设置它(或在"),a("code",[e._v("lerna.json")]),e._v("中设置"),a("code",[e._v("command.publish.verifyAccess")]),e._v("为"),a("code",[e._v("false")]),e._v(")。")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("小心")]),e._v(" "),a("p",[e._v("请小心使用。")])]),e._v(" "),a("h3",{attrs:{id:"otp"}},[a("code",[e._v("--otp")])]),e._v(" "),a("p",[e._v("当发布需要双重身份验证的包时，您可以使用"),a("code",[e._v("——otp")]),e._v("指定"),a("a",{attrs:{href:"https://docs.npmjs.com/about-two-factor-authentication",target:"_blank",rel:"noopener noreferrer"}},[e._v("一次性密码"),a("OutboundLink")],1),e._v(":")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --otp "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("123456")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("请注意")]),e._v(" "),a("p",[e._v("一次性密码在生成后 "),a("strong",[e._v("30")]),e._v(" 秒内过期。如果它在发布操作期间到期，提示符将在继续之前请求更新后的值。")])]),e._v(" "),a("h3",{attrs:{id:"preid"}},[a("code",[e._v("--preid")])]),e._v(" "),a("p",[e._v("和同名的"),a("code",[e._v("lerna version")]),e._v("配置项不同，该配置项仅适用于 "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--canary",target:"_blank",rel:"noopener noreferrer"}},[e._v("--canary"),a("OutboundLink")],1),e._v(" 版本计算。")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --canary\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 举例，使用下一个语义化预发布版本")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1.0.0 => 1.0.1-alpha.0")]),e._v("\n\nlerna publish --canary --preid next\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 举例，使用指定的预发布标识符来标识下一个语义化预发布版本")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1.0.0 => 1.0.1-next.0")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("当使用该参数运行时，"),a("code",[e._v("lerna publish --canary")]),e._v("将使用指定的 "),a("a",{attrs:{href:"http://semver.org/#spec-item-9",target:"_blank",rel:"noopener noreferrer"}},[e._v("prerelease 标识符"),a("OutboundLink")],1),e._v("递增"),a("code",[e._v("premajor")]),e._v("、"),a("code",[e._v("preminor")]),e._v("、"),a("code",[e._v("prepatch")]),e._v("或"),a("code",[e._v("prerelease")]),e._v("语义化版本。")]),e._v(" "),a("h3",{attrs:{id:"pre-dist-tag-tag"}},[a("code",[e._v("--pre-dist-tag <tag>")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --pre-dist-tag next\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("除了只适用于与预发行版本一起发布的软件包外，它和"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("--dist-tag"),a("OutboundLink")],1),e._v("并无二致。")]),e._v(" "),a("h3",{attrs:{id:"registry-url"}},[a("code",[e._v("--registry <url>")])]),e._v(" "),a("p",[e._v("当使用该参数运行时，转发的 npm 命令将为您的包使用指定 url 的注册表。")]),e._v(" "),a("p",[e._v("如果您不想在使用私有注册表时在所有"),a("code",[e._v("package.json")]),e._v("文件中分别设置注册表配置，那就是它出场的时候。")]),e._v(" "),a("h3",{attrs:{id:"tag-version-prefix"}},[a("code",[e._v("--tag-version-prefix")])]),e._v(" "),a("p",[e._v("配置项项允许提供自定义前缀来替代默认的"),a("code",[e._v("v")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 本地")]),e._v("\nlerna version --tag-version-prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# CI")]),e._v("\nlerna publish from-git --tag-version-prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("您也可以在"),a("code",[e._v("lerna.json")]),e._v("中进行配置，对这两个命令也同样适用：")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"tagVersionPrefix"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"packages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"packages/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"independent"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"temp-tag"}},[a("code",[e._v("--temp-tag")])]),e._v(" "),a("p",[e._v("当传递了该参数时，他将会改变默认的发布过程，首先将所有更改过的包发布到一个临时的 dist-tag ("),a("code",[e._v("lerna-temp")]),e._v(")中，然后将新版本移动到由"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("--dist-tag"),a("OutboundLink")],1),e._v("配置的 dist-tag 中(默认值"),a("code",[e._v("latest")]),e._v(")。")]),e._v(" "),a("p",[e._v("这通常是没有必要的，因为Lerna在默认情况下会按照拓扑顺序(所有依赖项优先)来发布包。")]),e._v(" "),a("h3",{attrs:{id:"yes"}},[a("code",[e._v("--yes")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("lerna publish --canary --yes\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 跳过“您确定要发布上述更改吗?”")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("当使用此标志运行时，"),a("code",[e._v("lerna publish")]),e._v("将跳过所有确认提示。在"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Continuous_integration",target:"_blank",rel:"noopener noreferrer"}},[e._v("持续集成(CI)"),a("OutboundLink")],1),e._v("中用于自动回答发布确认提示。")]),e._v(" "),a("h2",{attrs:{id:"已废弃的配置项"}},[e._v("已废弃的配置项")]),e._v(" "),a("h3",{attrs:{id:"skip-npm"}},[a("code",[e._v("--skip-npm")])]),e._v(" "),a("p",[e._v("直接调用 "),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/version#positionals",target:"_blank",rel:"noopener noreferrer"}},[e._v("lerna version"),a("OutboundLink")],1),e._v(" 即可。")]),e._v(" "),a("h2",{attrs:{id:"每个包的配置"}},[e._v("每个包的配置")]),e._v(" "),a("p",[e._v("叶子包可以可以配置特殊的"),a("a",{attrs:{href:"https://docs.npmjs.com/files/package.json#publishconfig",target:"_blank",rel:"noopener noreferrer"}},[e._v("publishConfig"),a("OutboundLink")],1),e._v("，在某些情况下可以改变"),a("code",[e._v("lerna publish")]),e._v("的行为。")]),e._v(" "),a("h3",{attrs:{id:"publishconfig-access"}},[a("code",[e._v("publishConfig.access")])]),e._v(" "),a("p",[e._v("要发布具有作用域的包(如"),a("code",[e._v("@mycompany/rocks")]),e._v(")，您必须设置"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/config#access",target:"_blank",rel:"noopener noreferrer"}},[e._v("access"),a("OutboundLink")],1),e._v(":")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"public"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("ul",[a("li",[e._v("如果把该字段设置到无作用域的包上，那么它会失败的。")]),e._v(" "),a("li",[e._v("如果您希望限定范围的包保持私有状态(即"),a("code",[e._v("“restricted”")]),e._v(")，则无需设置该值。")])]),e._v(" "),a("p",[a("strong",[e._v("注意：这与在叶子包中设置"),a("code",[e._v("“private:true”")]),e._v("不一样。如果设置了"),a("code",[e._v("private")]),e._v("字段，那么在任何情况下都不会发布该包。")])]),e._v(" "),a("h3",{attrs:{id:"publishconfig-registry"}},[a("code",[e._v("publishConfig.registry")])]),e._v(" "),a("p",[e._v("您可以通过设置"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/config#registry",target:"_blank",rel:"noopener noreferrer"}},[e._v("registry"),a("OutboundLink")],1),e._v("在每个包上定制注册表。")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://my-awesome-registry.com/"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("ul",[a("li",[e._v("传入"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--registry-url",target:"_blank",rel:"noopener noreferrer"}},[e._v("--registry"),a("OutboundLink")],1),e._v("可以应用到全局，其实在某些情况下会起到反效果。")])]),e._v(" "),a("h3",{attrs:{id:"publishconfig-tag"}},[a("code",[e._v("publishConfig.tag")])]),e._v(" "),a("p",[e._v("您可以通过设置"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/config#tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("tag"),a("OutboundLink")],1),e._v("来定制每个包的 dist-tag:")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"tag"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"flippin-sweet"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("ul",[a("li",[e._v("传入"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--dist-tag-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("--dist-tag"),a("OutboundLink")],1),e._v("将会覆盖该值。")]),e._v(" "),a("li",[e._v("如果同时传入了"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--canary",target:"_blank",rel:"noopener noreferrer"}},[e._v("--canary"),a("OutboundLink")],1),e._v("则该值会被忽略。")])]),e._v(" "),a("h3",{attrs:{id:"publishconfig-directory"}},[a("code",[e._v("publishConfig.directory")])]),e._v(" "),a("p",[e._v("这个非标准字段允许您定制已发布的子目录，就像"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--contents-dir",target:"_blank",rel:"noopener noreferrer"}},[e._v("--contents"),a("OutboundLink")],1),e._v("一样，但它是以每个包为基础的。所有其他关于"),a("code",[e._v("--contents")]),e._v("的内容仍然适用。")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"directory"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dist"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h2",{attrs:{id:"生命周期脚本"}},[e._v("生命周期脚本")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("// prepublish:      在打包和发布包之前运行。\n// prepare:         在打包和发布包之前运行，在 prepublish 之后，prepublishOnly 之前。\n// prepublishOnly:  在打包和发布包之前运行，只在 "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" publish 时运行。\n// prepack:         只在源码压缩打包之前运行。\n// postpack:        在源码压缩打包生成并移动到最终目的地后运行。\n// publish:         在包发布后运行。\n// postpublish:     在包发布后运行。\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("Lerna 将在"),a("code",[e._v("lerna publish")]),e._v("期间运行"),a("a",{attrs:{href:"https://docs.npmjs.com/misc/scripts#description",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm生命周期脚本"),a("OutboundLink")],1),e._v("，顺序如下:")]),e._v(" "),a("ol",[a("li",[e._v("如果采用没有指定版本，则运行所有"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/version#lifecycle-scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("版本生命周期脚本"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("如果"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--ignore-prepublish",target:"_blank",rel:"noopener noreferrer"}},[e._v("可用"),a("OutboundLink")],1),e._v("，在根目录运行"),a("code",[e._v("prepublish")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("在根目录中运行"),a("code",[e._v("prepare")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("在根目录中运行"),a("code",[e._v("prepublishOnly")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("在根目录运行"),a("code",[e._v("prepack")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("对于每个更改的包，按照拓扑顺序(所有依赖项在依赖关系之前):"),a("br"),e._v("\ni. 如果"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--ignore-prepublish",target:"_blank",rel:"noopener noreferrer"}},[e._v("可用"),a("OutboundLink")],1),e._v("，运行"),a("code",[e._v("prepublish")]),e._v("生命周期。"),a("br"),e._v("\nii. 运行"),a("code",[e._v("prepare")]),e._v("生命周期。"),a("br"),e._v("\niii. 运行"),a("code",[e._v("prepublishOnly")]),e._v("生命周期。"),a("br"),e._v("\niv. 运行"),a("code",[e._v("prepack")]),e._v("生命周期。"),a("br"),e._v("\nv. 通过"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/utils/pack-directory#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("JS API"),a("OutboundLink")],1),e._v("在临时目录中创建源码压缩包。\nvi. 运行"),a("code",[e._v("postpack")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("在根目录运行"),a("code",[e._v("postpack")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("对于每个更改的包，按照拓扑顺序(所有依赖项在依赖关系之前):"),a("br"),e._v("\ni. 通过"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/utils/npm-publish#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("JS API"),a("OutboundLink")],1),e._v("发布包到配置的"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--registry-url",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册表"),a("OutboundLink")],1),e._v("。"),a("br"),e._v("\nii. 运行"),a("code",[e._v("publish")]),e._v("生命周期。"),a("br"),e._v("\niii. 运行"),a("code",[e._v("postpublish")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("在根目录中运行"),a("code",[e._v("publish")]),e._v("生命周期。\n"),a("ul",[a("li",[e._v("为了避免递归调用，不要使用这个根生命周期来运行"),a("code",[e._v("lerna publish")]),e._v("。")])])]),e._v(" "),a("li",[e._v("在根目录中运行"),a("code",[e._v("postpublish")]),e._v("生命周期。")]),e._v(" "),a("li",[e._v("如果"),a("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#--temp-tag",target:"_blank",rel:"noopener noreferrer"}},[e._v("可用"),a("OutboundLink")],1),e._v("，将临时的 dist-tag 更新到最新")])])])}),[],!1,null,null,null);s.default=r.exports}}]);